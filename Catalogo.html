<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo Interactivo</title>
    <!-- Incluyendo Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Usando la fuente Inter para una mejor legibilidad -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Estilos para ocultar las flechas en los inputs de tipo número */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
        /* Estilos para el modal y la notificación */
        #notification-modal, #product-modal-container {
            transition: opacity 0.3s ease-in-out;
        }
        .active-category {
            background-color: #10B981; /* green-500 */
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        /* Estilos para el scrollbar de categorías */
        ::-webkit-scrollbar {
            height: 4px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #a8a8a8;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        /* Ocultar scrollbar en la barra de categorías, body y modal */
        .no-scrollbar::-webkit-scrollbar, 
        html::-webkit-scrollbar,
        #product-modal-content::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar, 
        html,
        #product-modal-content {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body class="bg-gray-100 antialiased">

    <!-- Contenedor principal -->
    <div class="container mx-auto p-4 md:p-8 max-w-7xl pb-40">
        
        <!-- Encabezado con Logo -->
        <header class="text-center md:text-left mb-8 flex items-center justify-center md:justify-start gap-4">
            <!-- REEMPLAZA ESTE SRC CON LA URL DE TU LOGO -->
            <img src="https://content.pancake.vn/2-2510/s800x800/2025/10/2/a3ad9eb732203de01316a3f6bdec7e7bf9b3dc57.jpg" alt="[Logo de la tienda]" class="h-16 w-16 md:h-20 md:w-20 rounded-full object-cover shadow-md">
            <div>
                <h1 class="text-3xl md:text-4xl font-extrabold text-gray-800">Nuestro Catálogo</h1>
                <p class="text-gray-600 mt-1">Explora, selecciona y envíanos tu pedido.</p>
            </div>
        </header>

        <!-- Contenedor Sticky para la Barra de Filtros -->
        <div class="sticky top-0 z-30 bg-gray-100/80 backdrop-blur-sm pt-4 pb-3 -mx-4 px-4">
             <!-- Barra de Filtros por Categoría -->
            <nav id="category-filters" class="flex items-center gap-2 overflow-x-auto whitespace-nowrap no-scrollbar">
                <!-- Los botones de categoría se insertarán aquí -->
            </nav>
        </div>

        <!-- Contenedor de la lista de productos -->
        <main id="product-list" class="mt-6 bg-white rounded-lg shadow-md overflow-hidden">
            <!-- Los productos se insertarán aquí dinámicamente -->
        </main>

    </div>

    <!-- Barra inferior de Total y Envío -->
    <footer class="fixed bottom-0 left-0 right-0 z-40 bg-white/95 backdrop-blur-sm shadow-[0_-2px_10px_rgba(0,0,0,0.08)] transition-transform duration-300 transform translate-y-full">
        <div class="container mx-auto max-w-7xl flex items-center justify-between p-4">
            <div>
                <span class="block text-sm text-gray-600 font-semibold">Total del Pedido</span>
                <span id="total-price" class="text-2xl font-extrabold text-gray-800">$ 0</span>
            </div>
            <button id="send-whatsapp" class="bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold py-3 px-5 rounded-full shadow-lg transform transition-transform duration-300 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-green-300 flex items-center gap-2 whitespace-nowrap">
                <svg class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M16.75 13.96c.25.13.41.34.41.61v1.32c0 .4-.23.75-.58.93-.32.17-.71.19-1.05.08-1.5-.49-2.84-1.33-3.95-2.44-1.12-1.12-1.95-2.46-2.44-3.96-.11-.34-.09-.73.08-1.05.17-.35.53-.58.93-.58h1.32c.27 0 .48.16.61.41.13.25.13.59 0 .84l-.69 1.2c-.11.2-.11.45 0 .64l1.73 1.73c.19.19.44.19.64 0l1.2-.69c.25-.13.59-.13.84 0zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10c5.52 0 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg>
                <span>Enviar Pedido</span>
            </button>
        </div>
    </footer>


    <!-- Modal de Producto (Full-Screen) -->
    <div id="product-modal-container" class="fixed inset-0 bg-white z-50 hidden transition-opacity duration-300">
        <div id="product-modal-content" class="w-full h-full overflow-y-auto">
            <!-- El contenido del modal se inyectará aquí -->
        </div>
    </div>

    <!-- Modal de Notificación -->
    <div id="notification-modal" class="fixed bottom-24 left-1/2 -translate-x-1/2 bg-red-500 text-white py-3 px-6 rounded-lg shadow-xl opacity-0 transform translate-y-10 z-50">
        <p id="notification-message"></p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- CONFIGURACIÓN DE PRODUCTOS ---
            const products = [
                { id: 1, name: "Camiseta Clásica Urbana", imageUrl: "https://content.pancake.vn/2-2509/s800x800/2025/9/29/267c7c5dcb8c2ea22ddf0e818974b81aac1234f8.jpg", price: 59900, description: "La camiseta perfecta para el día a día, con un corte moderno y algodón de alta calidad.", sizes: ["S", "M", "L", "XL"], colors: ["Negro", "Blanco", "Gris"], category: "Camisetas" },
                { id: 2, name: "Camiseta Diseño Minimalista", imageUrl: "https://content.pancake.vn/2-2510/s800x800/2025/10/2/06f76a5a2424a924bbe64c12ddb258603c1f462a.jpg", price: 64900, description: "Un diseño sutil para un look elegante y casual. Hecha con materiales reciclados.", sizes: ["S", "M", "L"], colors: ["Arena", "Azul Marino", "Verde Oliva"], category: "Camisetas" },
                { id: 3, name: "Polo Premium de Piqué", imageUrl: "https://placehold.co/600x600/2A9D8F/FFFFFF?text=Polo+1", price: 89900, description: "Elegancia y comodidad se unen en este polo de tejido piqué transpirable.", sizes: ["M", "L", "XL"], colors: ["Turquesa", "Blanco", "Negro"], category: "Polos" },
                { id: 4, name: "Buso con Capucha 'Hoodie'", imageUrl: "https://placehold.co/600x600/E76F51/FFFFFF?text=Buso+1", price: 129900, description: "Calidez y estilo urbano. Interior afelpado para máxima comodidad en días fríos.", sizes: ["S", "M", "L", "XL"], colors: ["Terracota", "Gris Jaspeado"], category: "Busos" },
                { id: 5, name: "Buso Cuello Redondo Básico", imageUrl: "https://placehold.co/600x600/E9C46A/333333?text=Buso+2", price: 109900, description: "Un esencial en cualquier armario. Versátil, cómodo y fácil de combinar.", sizes: ["S", "M", "L"], colors: ["Mostaza", "Negro", "Azul Acero"], category: "Busos" },
                { id: 6, name: "Polo Manga Larga", imageUrl: "https://placehold.co/600x600/264653/FFFFFF?text=Polo+2", price: 95900, description: "Perfecto para climas intermedios, manteniendo un estilo sofisticado y profesional.", sizes: ["S", "M", "L", "XL"], colors: ["Azul Oscuro", "Vino Tinto", "Gris"], category: "Polos" },
                { id: 7, name: "Camiseta Gráfica 'Vintage'", imageUrl: "https://placehold.co/600x600/9b59b6/FFFFFF?text=Camiseta+3", price: 72900, description: "Un toque retro con estampados de alta durabilidad y un ajuste relajado.", sizes: ["M", "L"], colors: ["Morado", "Negro Lavado"], category: "Camisetas" },
            ];
            
            const phoneNumber = "+573154870448";
            let cart = [];

            // --- ELEMENTOS DEL DOM ---
            const productList = document.getElementById('product-list');
            const categoryFilters = document.getElementById('category-filters');
            const sendButton = document.getElementById('send-whatsapp');
            const notificationModal = document.getElementById('notification-modal');
            const notificationMessage = document.getElementById('notification-message');
            const modalContainer = document.getElementById('product-modal-container');
            const modalContent = document.getElementById('product-modal-content');
            const totalPriceEl = document.getElementById('total-price');
            const footer = document.querySelector('footer');
            let notificationTimeout;

            // --- FUNCIONES AUXILIARES ---
            const formatPrice = (price) => new Intl.NumberFormat('es-CO', { style: 'currency', currency: 'COP', minimumFractionDigits: 0 }).format(price);
            const showNotification = (message) => {
                clearTimeout(notificationTimeout);
                notificationMessage.textContent = message;
                notificationModal.classList.replace('opacity-0', 'opacity-100');
                notificationModal.classList.replace('translate-y-10', 'translate-y-0');
                notificationTimeout = setTimeout(() => {
                    notificationModal.classList.replace('opacity-100', 'opacity-0');
                    notificationModal.classList.replace('translate-y-0', 'translate-y-10');
                }, 3000);
            };
            
            // --- LÓGICA DE CARRITO Y TOTAL ---
            const updateTotal = () => {
                const total = cart.reduce((sum, item) => {
                    const product = products.find(p => p.id === item.productId);
                    return sum + (item.quantity * product.price);
                }, 0);
                totalPriceEl.textContent = formatPrice(total);
                footer.classList.toggle('translate-y-full', total === 0);
            };
            
            const updateBadges = () => {
                document.querySelectorAll('.quantity-badge').forEach(badge => {
                    const productId = badge.dataset.productId;
                    const totalQuantity = cart
                        .filter(item => item.productId == productId)
                        .reduce((sum, item) => sum + item.quantity, 0);
                    
                    if (totalQuantity > 0) {
                        badge.textContent = totalQuantity;
                        badge.classList.remove('hidden');
                    } else {
                        badge.classList.add('hidden');
                    }
                });
            };

            const updateCart = (productId, size, color, change) => {
                let itemInCart = cart.find(item => item.productId === productId && item.size === size && item.color === color);
                
                if (itemInCart) {
                    itemInCart.quantity += change;
                    if (itemInCart.quantity <= 0) {
                        cart = cart.filter(item => item !== itemInCart);
                    }
                } else if (change > 0) {
                    cart.push({ productId, size, color, quantity: 1 });
                }
                updateTotal();
                updateBadges();
                if(!modalContainer.classList.contains('hidden')){
                    renderVariantListInModal(productId);
                }
            };

            // --- LÓGICA DE RENDERIZADO Y FILTROS ---
            const renderProducts = (filter = 'Todo') => {
                productList.innerHTML = '';
                const filteredProducts = products.filter(p => filter === 'Todo' || p.category === filter);
                
                filteredProducts.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = "product-card flex items-center p-4 gap-4 border-b last:border-b-0 cursor-pointer hover:bg-gray-50 transition-colors";
                    productCard.dataset.productId = product.id;
                    
                    productCard.innerHTML = `
                        <div class="relative flex-shrink-0">
                            <img src="${product.imageUrl}" alt="[Imagen de ${product.name}]" class="w-24 h-24 object-cover rounded-md">
                            <div data-product-id="${product.id}" class="quantity-badge absolute -top-2 -right-2 bg-green-500 text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center shadow-md hidden">0</div>
                        </div>
                        <div class="flex-grow">
                            <h3 class="text-base font-bold text-gray-800">${product.name}</h3>
                            <p class="text-sm text-gray-500">${product.category}</p>
                            <p class="text-lg font-extrabold text-emerald-600 mt-1">${formatPrice(product.price)}</p>
                        </div>
                    `;
                    productList.appendChild(productCard);
                });
                updateBadges();
            };
            
            const setupCategories = () => {
                const categories = ['Todo', ...new Set(products.map(p => p.category))];
                categoryFilters.innerHTML = categories.map(cat => `
                    <button class="category-btn px-4 py-2 rounded-full font-semibold transition-colors duration-200 ${cat === 'Todo' ? 'active-category' : 'bg-white hover:bg-gray-200'}" data-category="${cat}">
                        ${cat}
                    </button>
                `).join('');
                document.querySelectorAll('.category-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelector('.active-category')?.classList.remove('active-category');
                        btn.classList.add('active-category');
                        renderProducts(btn.dataset.category);
                    });
                });
            };
            
            // --- LÓGICA DE MODAL ---
            const renderVariantListInModal = (productId) => {
                const variantListContainer = modalContent.querySelector('#variant-list');
                if (!variantListContainer) return;

                const variantsInCart = cart.filter(item => item.productId == productId);
                variantListContainer.innerHTML = ''; // Limpiar la lista

                if (variantsInCart.length > 0) {
                    variantListContainer.innerHTML += `<h4 class="text-lg font-semibold text-gray-800 mt-6 mb-2 border-b pb-2">Variantes en tu pedido</h4>`;
                    variantsInCart.forEach(variant => {
                        const variantItem = document.createElement('div');
                        variantItem.className = 'flex justify-between items-center py-3 border-b';
                        variantItem.innerHTML = `
                            <div>
                                <p class="font-semibold">Talla: ${variant.size}</p>
                                <p class="text-sm text-gray-600">Color: ${variant.color}</p>
                            </div>
                            <div class="flex items-center justify-center gap-1">
                                <button class="quantity-btn decrease bg-gray-200 rounded-full w-8 h-8 flex items-center justify-center font-bold text-lg" data-size="${variant.size}" data-color="${variant.color}">-</button>
                                <input type="number" value="${variant.quantity}" class="w-12 text-center rounded-md border-gray-300 py-1" readonly>
                                <button class="quantity-btn increase bg-gray-200 rounded-full w-8 h-8 flex items-center justify-center font-bold text-lg" data-size="${variant.size}" data-color="${variant.color}">+</button>
                            </div>
                        `;
                        variantListContainer.appendChild(variantItem);
                    });
                }
            };
            
            const openModal = (productId) => {
                const product = products.find(p => p.id == productId);
                if (!product) return;
                
                modalContent.innerHTML = `
                    <div class="sticky top-0 z-10 bg-white/80 backdrop-blur-sm p-4 border-b flex justify-between items-center">
                        <button id="modal-back-btn" class="flex items-center gap-2 font-semibold text-gray-700 hover:text-black">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                            Volver
                        </button>
                        <h3 class="font-bold text-lg"></h3>
                        <div class="w-16"></div> <!-- Espaciador -->
                    </div>
                    <img src="${product.imageUrl}" alt="[Imagen de ${product.name}]" class="w-full aspect-video object-cover">
                    <div class="p-5">
                        <h2 class="text-3xl font-bold text-gray-800">${product.name}</h2>
                        <p class="text-sm font-semibold text-emerald-600 mt-2">${product.category}</p>
                        <p class="text-3xl font-extrabold text-gray-900 mt-2">${formatPrice(product.price)}</p>
                        <p class="text-base text-gray-600 mt-4">${product.description}</p>
                        
                        <div class="mt-6 bg-gray-50 p-4 rounded-lg">
                            <h4 class="text-lg font-semibold text-gray-800 mb-2">Añadir una variante</h4>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Talla:</label>
                                    <select class="mt-1 block w-full pl-3 pr-10 py-2 border-gray-300 rounded-md product-size">
                                        ${product.sizes.map(s => `<option>${s}</option>`).join('')}
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Color:</label>
                                    <select class="mt-1 block w-full pl-3 pr-10 py-2 border-gray-300 rounded-md product-color">
                                        ${product.colors.map(c => `<option>${c}</option>`).join('')}
                                    </select>
                                </div>
                            </div>
                            <button id="add-variant-btn" class="mt-4 w-full bg-green-500 text-white font-bold py-3 rounded-lg hover:bg-green-600 transition-colors">
                                Añadir al pedido
                            </button>
                        </div>

                        <div id="variant-list" class="pb-8">
                            <!-- Las variantes seleccionadas aparecerán aquí -->
                        </div>
                    </div>
                `;
                renderVariantListInModal(productId);
                modalContainer.dataset.productId = productId;
                modalContainer.classList.remove('hidden', 'opacity-0');
            };

            // --- MANEJO DE EVENTOS ---
            productList.addEventListener('click', (e) => {
                const card = e.target.closest('.product-card');
                if (card) openModal(card.dataset.productId);
            });
            
            modalContent.addEventListener('click', (e) => {
                const productId = modalContainer.dataset.productId;
                if (!productId) return;

                if (e.target.closest('#modal-back-btn')) {
                    modalContainer.classList.add('hidden', 'opacity-0');
                    return;
                }

                if (e.target.closest('#add-variant-btn')) {
                    const size = modalContent.querySelector('.product-size').value;
                    const color = modalContent.querySelector('.product-color').value;
                    updateCart(parseInt(productId), size, color, 1);
                    return;
                }

                const btn = e.target.closest('.quantity-btn');
                if (btn) {
                    const change = btn.classList.contains('increase') ? 1 : -1;
                    const size = btn.dataset.size;
                    const color = btn.dataset.color;
                    updateCart(parseInt(productId), size, color, change);
                }
            });

            sendButton.addEventListener('click', () => {
                if (cart.length === 0) {
                    showNotification("Por favor, añade al menos un producto.");
                    return;
                }
                
                let message = "¡Hola! 👋 Quisiera hacer el siguiente pedido:\n\n";
                let total = 0;

                cart.forEach(item => {
                    const product = products.find(p => p.id === item.productId);
                    total += item.quantity * product.price;
                    message += `*${product.name}*\n`;
                    message += `- Cantidad: ${item.quantity}\n`;
                    message += `- Talla: ${item.size}\n`;
                    message += `- Color: ${item.color}\n\n`;
                });
                
                message += `*Total Estimado: ${formatPrice(total)}*\n\n`;
                message += "¡Quedo atento a la confirmación, muchas gracias!";
                
                const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
            });
            
            // --- INICIALIZACIÓN ---
            setupCategories();
            renderProducts();
            updateTotal();
        });
    </script>
</body>
</html>


